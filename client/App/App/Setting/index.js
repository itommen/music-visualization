import React, { Component } from 'react';

import { Flex } from 'reflexbox';
import Dialog, { DialogTitle, DialogContent } from 'material-ui/Dialog';
import Typography from 'material-ui/Typography';
import Tabs, { Tab } from 'material-ui/Tabs';

import FilterFramesIcon from 'material-ui-icons/FilterFrames';
import BubbleChartIcon from 'material-ui-icons/BubbleChart';
import PermCameraMicIcon from 'material-ui-icons/PermCameraMic';

import FrameSetting from './Frame';
import VisualizersSetting from './Visualizers';
import OtherSetting from './OtherSetting';

import 'react-input-range/lib/css/index.css';

export default class Setting extends Component {
  constructor() {
    super();

    this.state = {
      index: 0
    }

    this.handleChangeIndex = this.handleChangeIndex.bind(this);
  }

  handleChangeIndex(event, index) {
    this.setState({ index });
  };

  render() {
    const { onUpdate, children, isOpen, onClose, setting } = this.props;
    const { index } = this.state;

    return <Dialog className='settings-dialog' open={isOpen} onClose={onClose}>
      <DialogTitle className='settings-title'>Settings</DialogTitle>
      <DialogContent style={{
        flex: '1 1 auto',
      }}>
        <Tabs
          value={index}
          onChange={this.handleChangeIndex}
          indicatorColor="primary"
          textColor="primary"
          fullWidth>
            <Tab label="Layout" icon={<img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMi4wMDIgNTEyLjAwMiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyLjAwMiA1MTIuMDAyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgd2lkdGg9IjMycHgiIGhlaWdodD0iMzJweCI+CjxnPgoJPGc+CgkJPHBhdGggZD0iTTQyNC4wMDIsMTI4LjQ0NEg4OGMtNS41MjIsMC0xMCw0LjQ3Ny0xMCwxMHYyMzUuMTExYzAsMC4wMDMsMCwwLDAsMC4wMDNjMCw1LjUyMyw0LjQ3OCwxMCwxMCwxMGgzMzYuMDAyICAgIGM1LjUyMiwwLDEwLTQuNDc3LDEwLTEwVjEzOC40NDRDNDM0LjAwMiwxMzIuOTIxLDQyOS41MjQsMTI4LjQ0NCw0MjQuMDAyLDEyOC40NDR6IE00MTQuMDAyLDMzMS4yNjZoLTIyLjY5MSAgICBjLTUuNTIyLDAtMTAsNC40NzctMTAsMTBzNC40NzgsMTAsMTAsMTBoMjIuNjkxdjEyLjI5Mkg5OFYzNDUuOTlsNzAuMzc3LTU4LjIzNGM2Ljc5NS01LjYyMiwxOC43MTctNS42MjMsMjUuNTEyLDBsNDYuODA5LDM4LjczMyAgICBjMy42OTksMy4wNjEsOS4wNTEsMy4wNjEsMTIuNzUsMGw4My43Ny02OS4zMTdjNi43OTUtNS42MjMsMTguNzE2LTUuNjI0LDI1LjUxMSwwbDUxLjI3Myw0Mi40MjdWMzMxLjI2NnogTTQxNC4wMDIsMjczLjY0ICAgIGwtMzguNTIyLTMxLjg3NmMtMTQuMzA0LTExLjgzNy0zNi43MTEtMTEuODM2LTUxLjAxMy0wLjAwMWwtNzcuMzk1LDY0LjA0MWwtNDAuNDM0LTMzLjQ1NyAgICBjLTE0LjMwMi0xMS44MzYtMzYuNzEtMTEuODM2LTUxLjAxMi0wLjAwMUw5OCwzMjAuMDMxVjE0OC40NDRoMzE2LjAwMlYyNzMuNjR6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8L2c+CjwvZz4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjU5LjAwMiwxNjAuMzkyYy0yMi4wNTYsMC00MCwxNy45NDQtNDAsMzkuOTk5YzAsMjIuMDU3LDE3Ljk0NCw0MCw0MCw0MHM0MC0xNy45NDQsNDAtNDAgICAgQzI5OS4wMDIsMTc4LjMzNSwyODEuMDU4LDE2MC4zOTIsMjU5LjAwMiwxNjAuMzkyeiBNMjU5LjAwMiwyMjAuMzkxYy0xMS4wMjgsMC0yMC04Ljk3Mi0yMC0yMGMwLTExLjAyNyw4Ljk3Mi0xOS45OTksMjAtMTkuOTk5ICAgIHMyMCw4Ljk3MiwyMCwxOS45OTlDMjc5LjAwMiwyMTEuNDE5LDI3MC4wMywyMjAuMzkxLDI1OS4wMDIsMjIwLjM5MXoiIGZpbGw9IiMwMDAwMDAiLz4KCTwvZz4KPC9nPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik0zNjIuNTgsMzMxLjI2NmgtMC4yN2MtNS41MjIsMC0xMCw0LjQ3Ny0xMCwxMHM0LjQ3OCwxMCwxMCwxMGgwLjI3YzUuNTIyLDAsMTAtNC40NzcsMTAtMTAgICAgUzM2OC4xMDMsMzMxLjI2NiwzNjIuNTgsMzMxLjI2NnoiIGZpbGw9IiMwMDAwMDAiLz4KCTwvZz4KPC9nPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik01MDIuMDAyLDY1LjAyN0gxMGMtNS41MjIsMC0xMCw0LjQ3Ny0xMCwxMHYzNjEuOTQ4YzAsNS41MjMsNC40NzgsMTAsMTAsMTBoNDkyLjAwMmM1LjUyMiwwLDEwLTQuNDc3LDEwLTEwVjc1LjAyNyAgICBDNTEyLjAwMiw2OS41MDQsNTA3LjUyNCw2NS4wMjcsNTAyLjAwMiw2NS4wMjd6IE00OTIuMDAyLDQyNi45NzVIMjBWODUuMDI3aDQ3Mi4wMDJWNDI2Ljk3NXoiIGZpbGw9IiMwMDAwMDAiLz4KCTwvZz4KPC9nPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik0yMTEuODk1LDM5OC4wMjFoLTAuNDc1Yy01LjUyMywwLTEwLDQuNDc3LTEwLDEwczQuNDc3LDEwLDEwLDEwaDAuNDc1YzUuNTIyLDAsMTAtNC40NzcsMTAtMTAgICAgUzIxNy40MTcsMzk4LjAyMSwyMTEuODk1LDM5OC4wMjF6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8L2c+CjwvZz4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMzAwLjU4MiwzOTguMDIxaC01OS42MDRjLTUuNTIzLDAtMTAsNC40NzctMTAsMTBzNC40NzcsMTAsMTAsMTBoNTkuNjA0YzUuNTIyLDAsMTAtNC40NzcsMTAtMTAgICAgUzMwNi4xMDQsMzk4LjAyMSwzMDAuNTgyLDM5OC4wMjF6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8L2c+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==" />} />
            <Tab label="Visuals" icon={<img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMzJweCIgaGVpZ2h0PSIzMnB4Ij4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMjI5LjMyMiwxODkuMDJjLTkuNDA2LDAtMTcuMDI5LDcuNjIzLTE3LjAyOSwxNy4wMjl2OTkuOTAyYzAsOS40MDYsNy42MjMsMTcuMDI5LDE3LjAyOSwxNy4wMjkgICAgczE3LjAyOS03LjYyMywxNy4wMjktMTcuMDI5di05OS45MDJDMjQ2LjM1LDE5Ni42NDMsMjM4LjcyNywxODkuMDIsMjI5LjMyMiwxODkuMDJ6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8L2c+CjwvZz4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMTc2LjUzMiwxMzYuMjMxYy05LjQwNiwwLTE3LjAyOSw3LjYyMy0xNy4wMjksMTcuMDI5djIwNS40ODdjMCw5LjQwNiw3LjYyMywxNy4wMjksMTcuMDI5LDE3LjAyOSAgICBzMTcuMDI5LTcuNjIzLDE3LjAyOS0xNy4wMzRWMTUzLjI1OUMxOTMuNTYxLDE0My44NTQsMTg1LjkzOCwxMzYuMjMxLDE3Ni41MzIsMTM2LjIzMXoiIGZpbGw9IiMwMDAwMDAiLz4KCTwvZz4KPC9nPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik0xMjMuMTc1LDg2Ljg0N2MtOS40MDYsMC0xNy4wMjksNy42MjMtMTcuMDI5LDE3LjAyOXYzMDQuMjQ4YzAsOS40MDYsNy42MjMsMTcuMDI5LDE3LjAyOSwxNy4wMjkgICAgczE3LjAyOS03LjYyMywxNy4wMjktMTcuMDI5VjEwMy44NzZDMTQwLjIwNCw5NC40NywxMzIuNTgxLDg2Ljg0NywxMjMuMTc1LDg2Ljg0N3oiIGZpbGw9IiMwMDAwMDAiLz4KCTwvZz4KPC9nPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik03MC4zODYsMTM2LjIzMWMtOS40MDYsMC0xNy4wMjksNy42MjMtMTcuMDI5LDE3LjAyOXYyMDUuNDg3YzAsOS40MDYsNy42MjMsMTcuMDI5LDE3LjAyOSwxNy4wMjkgICAgczE3LjAyOS03LjYyMywxNy4wMjktMTcuMDM0VjE1My4yNTlDODcuNDE1LDE0My44NTQsNzkuNzkxLDEzNi4yMzEsNzAuMzg2LDEzNi4yMzF6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8L2c+CjwvZz4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNMTcuMDI5LDE4NS42MTRDNy42MjMsMTg1LjYxNCwwLDE5My4yMzcsMCwyMDIuNjQzdjEwNi43MTRjMCw5LjQwNiw3LjYyMywxNy4wMjksMTcuMDI5LDE3LjAyOSAgICBzMTcuMDI5LTcuNjE4LDE3LjAyOS0xNy4wMjlWMjAyLjY0M0MzNC4wNTgsMTkzLjIzNywyNi40MzQsMTg1LjYxNCwxNy4wMjksMTg1LjYxNHoiIGZpbGw9IiMwMDAwMDAiLz4KCTwvZz4KPC9nPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik0zODguODI1LDg2Ljg0N2MtOS40MDYsMC0xNy4wMjksNy42MjMtMTcuMDI5LDE3LjAyOXYzMDQuMjQ4YzAsOS40MDYsNy42MjMsMTcuMDI5LDE3LjAyOSwxNy4wMjkgICAgczE3LjAyOS03LjYyMywxNy4wMjktMTcuMDI5VjEwMy44NzZDNDA1Ljg1NCw5NC40NywzOTguMjMsODYuODQ3LDM4OC44MjUsODYuODQ3eiIgZmlsbD0iIzAwMDAwMCIvPgoJPC9nPgo8L2c+CjxnPgoJPGc+CgkJPHBhdGggZD0iTTMzNS40NjgsMTM2LjIzMWMtOS40MDYsMC0xNy4wMjksNy42MjMtMTcuMDI5LDE3LjAyOXYyMDUuNDg3YzAsOS40MDYsNy42MjMsMTcuMDI5LDE3LjAyOSwxNy4wMjkgICAgYzkuNDA2LDAsMTcuMDI5LTcuNjIzLDE3LjAyOS0xNy4wMzRWMTUzLjI1OUMzNTIuNDk3LDE0My44NTQsMzQ0Ljg3MywxMzYuMjMxLDMzNS40NjgsMTM2LjIzMXoiIGZpbGw9IiMwMDAwMDAiLz4KCTwvZz4KPC9nPgo8Zz4KCTxnPgoJCTxwYXRoIGQ9Ik0yODIuNjc5LDE2Mi45MDljLTkuNDA2LDAtMTcuMDI5LDcuNjIzLTE3LjAyOSwxNy4wMjl2MTUyLjEyNGMwLDkuNDA2LDcuNjIzLDE3LjAyOSwxNy4wMjksMTcuMDI5ICAgIGM5LjQwNiwwLDE3LjAyOS03LjYxOCwxNy4wMjktMTcuMDI5VjE3OS45MzhDMjk5LjcwNywxNzAuNTMyLDI5Mi4wODQsMTYyLjkwOSwyODIuNjc5LDE2Mi45MDl6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8L2c+CjwvZz4KPGc+Cgk8Zz4KCQk8cGF0aCBkPSJNNDQxLjYxNCwxMzYuMjMxYy05LjQwNiwwLTE3LjAyOSw3LjYyMy0xNy4wMjksMTcuMDI5djIwNS40ODdjMCw5LjQwNiw3LjYyMywxNy4wMjksMTcuMDI5LDE3LjAyOSAgICBzMTcuMDI5LTcuNjIzLDE3LjAyOS0xNy4wMzRWMTUzLjI1OUM0NTguNjQzLDE0My44NTQsNDUxLjAyLDEzNi4yMzEsNDQxLjYxNCwxMzYuMjMxeiIgZmlsbD0iIzAwMDAwMCIvPgoJPC9nPgo8L2c+CjxnPgoJPGc+CgkJPHBhdGggZD0iTTQ5NC45NzEsMTg1LjYxNGMtOS40MDYsMC0xNy4wMjksNy42MjMtMTcuMDI5LDE3LjAyOXYxMDYuNzE0YzAsOS40MDYsNy42MjMsMTcuMDI5LDE3LjAyOSwxNy4wMjkgICAgYzkuNDA2LDAsMTcuMDI5LTcuNjE4LDE3LjAyOS0xNy4wMjlWMjAyLjY0M0M1MTIsMTkzLjIzNyw1MDQuMzc3LDE4NS42MTQsNDk0Ljk3MSwxODUuNjE0eiIgZmlsbD0iIzAwMDAwMCIvPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=" />} />
            <Tab label="Inputs" icon={<img src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDYwIDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA2MCA2MDsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiPgo8Zz4KCTxwYXRoIGQ9Ik01NS4yMDEsMTUuNWgtOC41MjRsLTQtMTBIMTcuMzIzbC00LDEwSDEydi01SDZ2NUg0Ljc5OUMyLjE1MiwxNS41LDAsMTcuNjUyLDAsMjAuMjk5djI5LjM2OCAgIEMwLDUyLjMzMiwyLjE2OCw1NC41LDQuODMzLDU0LjVoNTAuMzM0YzIuNjY1LDAsNC44MzMtMi4xNjgsNC44MzMtNC44MzNWMjAuMjk5QzYwLDE3LjY1Miw1Ny44NDgsMTUuNSw1NS4yMDEsMTUuNXogTTgsMTIuNWgydjNIOCAgIFYxMi41eiBNNTgsNDkuNjY3YzAsMS41NjMtMS4yNzEsMi44MzMtMi44MzMsMi44MzNINC44MzNDMy4yNzEsNTIuNSwyLDUxLjIyOSwyLDQ5LjY2N1YyMC4yOTlDMiwxOC43NTYsMy4yNTYsMTcuNSw0Ljc5OSwxNy41SDZoNiAgIGgyLjY3N2w0LTEwaDIyLjY0Nmw0LDEwaDkuODc4YzEuNTQzLDAsMi43OTksMS4yNTYsMi43OTksMi43OTlWNDkuNjY3eiIgZmlsbD0iIzAwMDAwMCIvPgoJPHBhdGggZD0iTTMwLDE0LjVjLTkuOTI1LDAtMTgsOC4wNzUtMTgsMThzOC4wNzUsMTgsMTgsMThzMTgtOC4wNzUsMTgtMThTMzkuOTI1LDE0LjUsMzAsMTQuNXogTTMwLDQ4LjVjLTguODIyLDAtMTYtNy4xNzgtMTYtMTYgICBzNy4xNzgtMTYsMTYtMTZzMTYsNy4xNzgsMTYsMTZTMzguODIyLDQ4LjUsMzAsNDguNXoiIGZpbGw9IiMwMDAwMDAiLz4KCTxwYXRoIGQ9Ik0zMCwyMC41Yy02LjYxNywwLTEyLDUuMzgzLTEyLDEyczUuMzgzLDEyLDEyLDEyczEyLTUuMzgzLDEyLTEyUzM2LjYxNywyMC41LDMwLDIwLjV6IE0zMCw0Mi41Yy01LjUxNCwwLTEwLTQuNDg2LTEwLTEwICAgczQuNDg2LTEwLDEwLTEwczEwLDQuNDg2LDEwLDEwUzM1LjUxNCw0Mi41LDMwLDQyLjV6IiBmaWxsPSIjMDAwMDAwIi8+Cgk8cGF0aCBkPSJNNTIsMTkuNWMtMi4yMDYsMC00LDEuNzk0LTQsNHMxLjc5NCw0LDQsNHM0LTEuNzk0LDQtNFM1NC4yMDYsMTkuNSw1MiwxOS41eiBNNTIsMjUuNWMtMS4xMDMsMC0yLTAuODk3LTItMnMwLjg5Ny0yLDItMiAgIHMyLDAuODk3LDIsMlM1My4xMDMsMjUuNSw1MiwyNS41eiIgZmlsbD0iIzAwMDAwMCIvPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=" />} />
        </Tabs>
        <Flex auto column>
          {index === 0 ? <FrameSetting key='frame' setting={setting} onUpdate={onUpdate} /> : null}
          {index === 1 ? <VisualizersSetting key='vizualize' setting={setting} onUpdate={onUpdate} /> : null}
          {index === 2 ? <OtherSetting key='other' children={children} /> : null}
        </Flex>
      </DialogContent>
    </Dialog >
  }
};
